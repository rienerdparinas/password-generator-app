let options={uppercase:JSON.parse(localStorage.getItem("uppercase"))??!0,lowercase:JSON.parse(localStorage.getItem("lowercase"))??!0,numbers:JSON.parse(localStorage.getItem("numbers"))??!0,symbols:JSON.parse(localStorage.getItem("symbols"))??!0,length:JSON.parse(localStorage.getItem("length"))??8},theme=localStorage.getItem("theme")??!1;function $(e){return 1===document.querySelectorAll(e).length?document.querySelectorAll(e)[0]:document.querySelectorAll(e)}function getRandomNumber(e,t){return Math.floor(Math.random()*(t-e+1))+e}function toast(e){let t=document.createElement("div");t.classList.add("toast","text-bg-dark","position-fixed","bottom-0","start-50","p-3","rounded","shadow-lg","show","text-center"),t.innerHTML=e,$("body").appendChild(t),setTimeout(()=>{t.remove()},3e3)}function generatePassword(e=!0){let t=collection="";if(!options.uppercase&&!options.lowercase&&!options.numbers&&!options.symbols){$("#password").value="",toast("Error - No selection made");return}localStorage.setItem("uppercase",options.uppercase),localStorage.setItem("lowercase",options.lowercase),localStorage.setItem("numbers",options.numbers),localStorage.setItem("symbols",options.symbols),localStorage.setItem("length",options.length),options.uppercase&&(collection+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),options.lowercase&&(collection+="abcdefghijklmnopqrstuvwxyz"),options.numbers&&(collection+="0123456789"),options.symbols&&(collection+="!@#$%^&*()-_+={}[]|:;'\\\"<>.,/?`~");for(let s=0;s<options.length;s++)t+=collection[getRandomNumber(0,collection.length-1)];$("#password").value=t,e&&toast("Password generated")}function switchTheme(e=!0){let t=$("#theme");$("html").setAttribute("data-bs-theme",t.checked?"dark":"light"),$("#theme-icon .bi-sun-fill").classList.add("d-none"),$("#theme-icon .bi-moon-fill").classList.add("d-none"),$("#theme-icon .bi-"+(t.checked?"moon":"sun")+"-fill").classList.remove("d-none"),localStorage.setItem("theme",t.checked),e&&toast("Switched theme")}function copyToClipboard(){navigator.clipboard.writeText($("#password").value),toast("Copied to clipboard")}document.addEventListener("DOMContentLoaded",()=>{generatePassword(!1),$("#theme").checked=JSON.parse(localStorage.getItem("theme")),switchTheme(!1),$("#uppercase").checked=JSON.parse(localStorage.getItem("uppercase")),$("#lowercase").checked=JSON.parse(localStorage.getItem("lowercase")),$("#numbers").checked=JSON.parse(localStorage.getItem("numbers")),$("#symbols").checked=JSON.parse(localStorage.getItem("symbols")),$("#length").value=JSON.parse(localStorage.getItem("length")),$("#length-display").innerHTML=localStorage.getItem("length")}),$('input[type="checkbox"]:not(#theme)').forEach(e=>{e.addEventListener("change",function(){let e=this.getAttribute("id");if($('input[type="checkbox"]:not(#theme):checked').length<1){this.checked=!0,uppercase=!0,generatePassword();return}"uppercase"===e&&(options.uppercase=!options.uppercase),"lowercase"===e&&(options.lowercase=!options.lowercase),"numbers"===e&&(options.numbers=!options.numbers),"symbols"===e&&(options.symbols=!options.symbols),generatePassword()})}),$("#length").addEventListener("input",function(){options.length=this.value,$("#length-display").innerHTML=options.length,generatePassword(),this.blur()}),$("#theme").addEventListener("change",function(){switchTheme(),this.blur()}),$("#regenerate").addEventListener("click",function(){generatePassword(),this.blur()}),$("#copy").addEventListener("click",function(){copyToClipboard(),this.blur()}),document.body.onkeyup=e=>{let t=e.keyCode;if((32===t||82===t)&&generatePassword(),67===t&&copyToClipboard(),77===t&&($("#theme").checked=!$("#theme").checked,switchTheme()),85===t){if($("#uppercase").checked=!$("#uppercase").checked,$('input[type="checkbox"]:not(#theme):checked').length<1){$("#uppercase").checked=!0,uppercase=!0,generatePassword();return}options.uppercase=!options.uppercase,generatePassword()}if(76===t){if($("#lowercase").checked=!$("#lowercase").checked,$('input[type="checkbox"]:not(#theme):checked').length<1){$("#lowercase").checked=!0,lowercase=!0,generatePassword();return}options.lowercase=!options.lowercase,generatePassword()}if(78===t){if($("#numbers").checked=!$("#numbers").checked,$('input[type="checkbox"]:not(#theme):checked').length<1){$("#numbers").checked=!0,numbers=!0,generatePassword();return}options.numbers=!options.numbers,generatePassword()}if(83===t){if($("#symbols").checked=!$("#symbols").checked,$('input[type="checkbox"]:not(#theme):checked').length<1){$("#symbols").checked=!0,symbols=!0,generatePassword();return}options.symbols=!options.symbols,generatePassword()}37===t&&(options.length--,options.length<parseInt($("#length").min)&&(options.length=parseInt($("#length").min)),$("#length").value=options.length,$("#length-display").innerHTML=options.length,generatePassword()),39===t&&(options.length++,options.length>parseInt($("#length").max)&&(options.length=parseInt($("#length").max)),$("#length").value=options.length,$("#length-display").innerHTML=options.length,generatePassword())};